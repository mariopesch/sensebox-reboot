<!DOCTYPE html>
<html lang="en">
<head>
    <link href="http://gmpg.org/xfn/11" rel="profile">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta http-equiv="content-type" content="text/html; charset=utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <title>Mobilerfeinstaubloggerlora - senseBox Reboot</title>

    <link rel="stylesheet" href="/css/style.css">
    <script src="/js/jquery-3.5.1.min.js"></script>
    <script src="/js/bootstrap.min.js"></script>
    <script src="/js/projects.js"></script>
</head>

<body>
  <nav class="navbar navbar-expand-lg fixed-top navbar-light bg-light">
    <div class="container">
        <a class="navbar-brand" href="/"><img src="/images/logos/sensebox_logo.svg" width="30" height="30"
                class="d-inline-block align-top" alt="">
            senseBox Reboot</a>
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarResponsive"
            aria-controls="navbarResponsive" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarResponsive">
            <ul class="navbar-nav ml-auto">
                <li class="nav-item active">
                    <a class="nav-link" href="#">Home
                        <span class="sr-only">(current)</span>
                    </a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="/products">Produkte</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="/blog">Blog</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="/projects">Projekte</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="/material">Material</a>
                </li>
            </ul>
        </div>
    </div>
</nav>

  <div class="container">
    <head>
    <link href="http://gmpg.org/xfn/11" rel="profile">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta http-equiv="content-type" content="text/html; charset=utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <title>Mobilerfeinstaubloggerlora - senseBox Reboot</title>

    <link rel="stylesheet" href="/css/style.css">
    <script src="/js/jquery-3.5.1.min.js"></script>
    <script src="/js/bootstrap.min.js"></script>
    <script src="/js/projects.js"></script>
</head>
<!---->
<!-- News Bereich / Blogeinträge -->
<div class="posts">
	<div class="row">
		<div class="col-lg-12 post-header">
			<div style="text-align: center;">
				<h2>
					<a href="http://localhost:4000/projects" style="color: rgba(0,0,0,0.5);">Projekte</a>
				</h2>
				<h1 class="post-title">Mobiler Datenlogger für Feinstaubwerte(LoRa)</h1>
				<div class="clearfix">
					<span class="author">Von Paul am 06/05/2019</span>
				</div>
				
				<div class="col-lg-6 col-sm-6 col-lg-offset-3 col-sm-offset-3 hidden-xs">
					
					<img class="press-pic" src="/images/projects//mobile_feinstaubstation/lora/lora_oled.jpg"
						alt="Mobilerfeinstaubloggerlora - Logo" />
				</div>
				
			</div>
		</div>
	</div>
	<hr>
	<div class="row">
		<div class="col-md-6">
			<h4></h4>
			<ul class="toc__menu">
  <li><a href="#mobiler-datenlogger-für-feinstaubwertelora">Mobiler Datenlogger für Feinstaubwerte(LoRa)</a>
    <ul>
      <li><a href="#aufbau">Aufbau</a></li>
      <li><a href="#thethingsnetwork--opensensemaposem-setup">TheThingsNetwork &amp; OpenSenseMap(OSeM)-Setup</a></li>
      <li><a href="#programmierung">Programmierung</a>
        <ul>
          <li><a href="#libarys">Libarys</a></li>
          <li><a href="#globale-variablen">Globale Variablen</a></li>
          <li><a href="#libary-objekte">Libary-Objekte</a></li>
          <li><a href="#smartdelay">smartDelay</a></li>
          <li><a href="#lora-funktionen-und-variablen">LoRa: Funktionen und Variablen</a></li>
          <li><a href="#setup">Setup</a></li>
          <li><a href="#loop">Loop</a></li>
          <li><a href="#der-gesamte-code">Der gesamte Code</a></li>
        </ul>
      </li>
    </ul>
  </li>
</ul>
		</div>
		<div class="col-md-6">
			<h4> </h4>
			<ul>
				
				<li>senseBox MCU</li>
				
				<li>OLED Display</li>
				
				<li>Temperatur und Luftfeuchtesensor(HDC 1080)</li>
				
				<li>Feinstaubsensor(SDS011)</li>
				
				<li>GPS Modul</li>
				
				<li>LoRa Bee</li>
				
				<li>JST Kabel</li>
				
			</ul>
		</div>
	</div>
	<hr>
	<article class="post-content">
		<head><title>Mobiler Feinstaublogger mit GPS und LoRa</title></head>

<h1 id="mobiler-datenlogger-für-feinstaubwertelora">Mobiler Datenlogger für Feinstaubwerte(LoRa)</h1>
<p>In diesem Projekt wird mit der SenseBoxMCU ein mobiler Feinstaubmesser gebaut, der auf Knopfdruck seine Messwerte auf der SD-Karte speichert und sie mit GPS-Koordinaten an die OpenSenseMap schickt. Dafür wird in dieser Variante der LoRa Funkstandard benutzt, der die Daten über TheThingsNetwork an die OpenSenseMap sendet.</p>

<h2 id="aufbau">Aufbau</h2>
<p>Für den Aufbau werden folgende Komponenten verwendet. Achte darauf, dass das LoRa-Bee auf den XBEE Steckplatz 1 und der Feinstaubsensor auf UART 2 aufgesteckt werden muss. 
Man braucht:</p>
<ul>
  <li>
    <p>den LoRa Bee</p>
  </li>
  <li>
    <p>das OLED-Display</p>
  </li>
  <li>
    <p>den HDC 1080</p>
  </li>
  <li>
    <p>das GPS-Modul</p>
  </li>
  <li>
    <p>den SDS011</p>
  </li>
</ul>

<h2 id="thethingsnetwork--opensensemaposem-setup">TheThingsNetwork &amp; OpenSenseMap(OSeM)-Setup</h2>

<p>Bevor du die SenseBox mit der <a href="https://opensensemap.org">OSeM</a> verbinden kannst, musst du dir erst einmal ein <a href="https://console.thethingsnetwork.org">TheThingsNetwork</a> Konto, eine Application und ein Device erstellen. Dabei erhältst du eine Application EUI, eine Device EUI und einen Appkey, diese musst du später im Code eintragen. Dabei ist das Format der Keys und EUI´s wichtig</p>
<div class="row">
    <div class="post-image">
        
        <img src="/images/projects/mobile_feinstaubstation/lora/EUI.png" alt="/images/projects/mobile_feinstaubstation/lora/EUI.png - Logo" data-zoomable="" />
        
    </div>
</div>
<p>Bei der Registrierung bestimmst du außerdem noch eine <code class="highlighter-rouge">App_ID</code> und eine <code class="highlighter-rouge">Dev_ID</code>, diese müssen im TheThingsNetwork-Reiter in der OpenSenseMap eingetragen werden:</p>
<div class="row">
    <div class="post-image">
        
        <img src="/images/projects/mobile_feinstaubstation/lora/ids.png" alt="/images/projects/mobile_feinstaubstation/lora/ids.png - Logo" data-zoomable="" />
        
    </div>
</div>

<p>Wenn dein TTN-Konto, die Application und das Device eingerichtet sind, musst du noch eine Weiterleitung an die OpenSenseMap einrichten, eine sogennante HTTP-Integration. Diese befindet sich unter Console, Integrations. Hier klickst du auf “add Integration” und trägst die Werte ein:</p>
<div class="row">
    <div class="post-image">
        
        <img src="/images/projects/mobile_feinstaubstation/lora/osem_httpinteg.png" alt="/images/projects/mobile_feinstaubstation/lora/osem_httpinteg.png - Logo" data-zoomable="" />
        
    </div>
</div>

<p>Die hier nicht aufgelisteten Zeilen <em>sollten</em> leer bleiben.</p>

<p>Jetzt muss nur noch unter Payload Formats im Reiter “Decoder” der folgende Javascript-Code eingetragen werden:</p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function Decoder(bytes, port) {
 // bytes is of type Buffer.
 'use strict';
 var TEMPSENSOR_ID="Deine Temperatursensor ID",
   HUMISENSOR_ID="Deine Luftfeuchtesensor ID",
   PM10_ID="Deine PM10-Sensor ID",
   PM25_ID="Deine PM25-Sensor ID";
  var lat = 0,lng = 0;
 var bytesToInt = function (bytes) {
   var i = 0;
   for (var x = 0; x &lt; bytes.length; x++) {
     i |= +(bytes[x] &lt;&lt; (x * 8));
   }
   return i;
 };

 var latLng = function(bytes) {
  if (bytes.length !== latLng.BYTES) {
    throw new Error('Lat/Long must have exactly 8 bytes');
  }

  lat = (bytesToInt(bytes.slice(0, latLng.BYTES / 2))/1e2)/10000;
  lng = (bytesToInt(bytes.slice(latLng.BYTES / 2, latLng.BYTES))/1e2)/10000;

};
latLng.BYTES = 8;

 var uint8 = function (bytes) {
   if (bytes.length !== uint8.BYTES) {
     throw new Error('int must have exactly 1 byte');
   }
   return bytesToInt(bytes);
 };
 uint8.BYTES = 1;

 var uint16 = function (bytes) {
   if (bytes.length !== uint16.BYTES) {
     throw new Error('int must have exactly 2 bytes');
   }
   return bytesToInt(bytes);
 };
 uint16.BYTES = 2;


 var humidity = function (bytes) {
   if (bytes.length !== humidity.BYTES) {
     throw new Error('Humidity must have exactly 2 bytes');
   }

   var h = bytesToInt(bytes);
   return h / 1e2;
 };
 humidity.BYTES = 2;

 
</code></pre></div></div>
<p>In diesem ersten Abschnitt werden alle Datentypen definiert, die per LoRa geschickt werden können. Dabei werden auch gleich die Decodiermethoden mitgegeben.</p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code> var decode = function (bytes, mask, names) {

   var maskLength = mask.reduce(function (prev, cur) {
     return prev + cur.BYTES;
   }, 0);
   if (bytes.length &lt; maskLength) {
     throw new Error('Mask length is ' + maskLength + ' whereas input is ' + bytes.length);
   }

   names = names || [];
   var offset = 0;
   return mask
     .map(function (decodeFn) {
       var current = bytes.slice(offset, offset += decodeFn.BYTES);
       return decodeFn(current);
     })
     .reduce(function (prev, cur, idx) {
       prev[names[idx] || idx] = cur;
       return prev;
     }, {});
 };
 var bytesToSenseBoxJson = function (bytes) {
   var json;

   try {
     json = decode(bytes,
       [
       uint16,
       humidity,
       uint16,
       uint16,
       latLng,
       uint16,
       uint16,
       uint16,
       uint16,
       uint16,
       uint16
       ],
       [
       TEMPSENSOR_ID,
       HUMISENSOR_ID,
       PM10_ID,
       PM25_ID,
       "location",
       "year",
       "month",
       "day",
       "hour",
       "minute",
       "second",
       ]);

    if(json["month"] == 0){
      json["month"] = 1;
    }
    if(json["day"] == 0){
      json["day"] = 1;
    }
     //temp
     json[TEMPSENSOR_ID] = [String(parseFloat(((json[TEMPSENSOR_ID] / 771) - 18).toFixed(1))),String(json["year"])+"-"+String(("0" + json["month"]).slice(-2))+"-"+String(("0" + json["day"]).slice(-2))+"T"+String(("0" + json["hour"]).slice(-2))+":"+String(("0" + json["minute"]).slice(-2))+":"+String(("0" + json["second"]).slice(-2))+"Z",[lng,lat]];

     //hum
     json[HUMISENSOR_ID] = [String(parseFloat(json[HUMISENSOR_ID].toFixed(1))),String(json["year"])+"-"+String(("0" + json["month"]).slice(-2))+"-"+String(("0" + json["day"]).slice(-2))+"T"+String(("0" + json["hour"]).slice(-2))+":"+String(("0" + json["minute"]).slice(-2))+":"+String(("0" + json["second"]).slice(-2))+"Z",[lng,lat]];

     // pm10
     json[PM10_ID] = [String(parseFloat((json[PM10_ID] / 10).toFixed(1))),String(json["year"])+"-"+String(("0" + json["month"]).slice(-2))+"-"+String(("0" + json["day"]).slice(-2))+"T"+String(("0" + json["hour"]).slice(-2))+":"+String(("0" + json["minute"]).slice(-2))+":"+String(("0" + json["second"]).slice(-2))+"Z",[lng,lat]];
     // pm25
     json[PM25_ID] = [String(parseFloat((json[PM25_ID] / 10).toFixed(1))),String(json["year"])+"-"+String(("0" + json["month"]).slice(-2))+"-"+String(("0" + json["day"]).slice(-2))+"T"+String(("0" + json["hour"]).slice(-2))+":"+String(("0" + json["minute"]).slice(-2))+":"+String(("0" + json["second"]).slice(-2))+"Z",[lng,lat]];
     delete json.year;
     delete json.month;
     delete json.day;
     delete json.hour;
     delete json.minute;
     delete json.second;

   } catch (e) {
     json = { payload: bytes };
   }

   return json;
 };

 return bytesToSenseBoxJson(bytes);
}
</code></pre></div></div>

<p>Im zweiten Abschnitt findet die eigentliche Decodierung statt: Die Werte werden in der Sendereihenfolge decodiert und in ein JSON-Objekt geschrieben. Dieses Objekt wird danach in das Format der OpenSenseMap konvertiert und an die HTTP-Integration gesendet.</p>

<div class="row">
    <div class="post-image">
        
        <img src="/images/projects/mobile_feinstaubstation/lora/osem_decoder.png" alt="/images/projects/mobile_feinstaubstation/lora/osem_decoder.png - Logo" data-zoomable="" />
        
    </div>
</div>

<h2 id="programmierung">Programmierung</h2>
<p>Dieses Projekt erfordert ein sehr komplexes Programm, deshalb auch die Schwierigkeitsstufe “Schwer”
Das Programm enthält viel “Kosmetik”, vorallem für das Display, weshalb der Code so lang ist.</p>
<h3 id="libarys">Libarys</h3>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>//Einbinden der benötigten Libaries
#include &lt;senseBoxIO.h&gt;
#include &lt;TinyGPS++.h&gt;
#include &lt;SPI.h&gt;
#include &lt;Wire.h&gt;
#include &lt;Adafruit_GFX.h&gt;
#include &lt;Adafruit_SSD1306.h&gt;
#include &lt;Adafruit_HDC1000.h&gt;
#include &lt;SDS011-select-serial.h&gt;
#include &lt;LoraMessage.h&gt;
#include &lt;lmic.h&gt;
#include &lt;hal/hal.h&gt;
#include &lt;SPI.h&gt;
</code></pre></div></div>
<h3 id="globale-variablen">Globale Variablen</h3>
<p>Man braucht globale Variablen, um die Messwerte der Sensoren sowie Hardwareinformationen im gesamten Programm verfügbar zu machen. Die MCU hat einen vom Bootloader reservierten Speicherbereich für diese Variablen. Du nutzt hier direkt beide Methoden der Definition, einmal die <code class="highlighter-rouge">#define</code>-Methode und die Typendefinition.</p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>// #define Statements für Globale Variablen
#define OLED_RESET 4
//#define ENABLE_DEBUG //diese Zeile entkommentieren für Ausgabe im Seriellen Monitor
#ifdef ENABLE_DEBUG
#define DEBUG(str) Serial.println(str)
#else
#define DEBUG(str)
#endif
//Globale Variablen
float pm10,pm25;
float temperature;
float humidity;
</code></pre></div></div>
<h4 id="variablentypen">Variablentypen</h4>
<ul>
  <li><code class="highlighter-rouge">boolean</code>: wahr o. falsch; kann nur zwei Werte annehmen, 1 oder 0.</li>
  <li><code class="highlighter-rouge">char</code>: Character; alphanumerische Zeichen (Buchstaben, Zahlen, Sonderzeichen)</li>
  <li><code class="highlighter-rouge">byte</code>:  ganze Zahlen;  ganze Zahlen von 0 bis 255, auch im Binärformat, dann definiert mit 0b[WERT]</li>
  <li><code class="highlighter-rouge">int</code>: ganze Zahlen;  ganze Zahlen von -32.758 bis 32.767</li>
  <li><code class="highlighter-rouge">long</code>:  ganze Zahlen;  ganze Zahlen von - 2 Milliarden bis 2 Milliarden</li>
  <li><code class="highlighter-rouge">float</code>: Fließkommazahlen;  Bruchzahlen</li>
  <li><code class="highlighter-rouge">String</code>:  Zeichenkette;  Text bestehend aus ASCII Zeichen</li>
  <li><code class="highlighter-rouge">array</code>: Variablenfeld; Eine Reihe von Werten des selben Variablentyps können gesammelt gespeichert werden</li>
</ul>

<p>In diesem Programm werden die Typen <code class="highlighter-rouge">boolean</code>,<code class="highlighter-rouge">int</code> und <code class="highlighter-rouge">float</code> benutzt.</p>

<h3 id="libary-objekte">Libary-Objekte</h3>
<p>Diese Objekte brauchst du, um die Funktionen der Libarys ansprechen zu können.</p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>//Libary-Objekte
SDS011 SDS(Serial2);        
Adafruit_SSD1306 display(OLED_RESET);
TinyGPSPlus gps;
Adafruit_HDC1000 hdc = Adafruit_HDC1000();
</code></pre></div></div>

<h3 id="smartdelay">smartDelay</h3>
<p>Diese Funktion sorgt dafür, dass das GPS-Modul weiterhin ausgelesen wird</p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>//Diese Funktion stellt sicher, dass das GPS-Modul weiterhin ausgelesen wird.
static void smartDelay(unsigned long ms)
{
  unsigned long start = millis();
  do 
  {
    Wire.requestFrom(0x42,10);
    while (Wire.available())
      gps.encode(Wire.read());
  } while (millis() - start &lt; ms);
}
</code></pre></div></div>

<h3 id="lora-funktionen-und-variablen">LoRa: Funktionen und Variablen</h3>
<p>Jetzt kommt der komplexeste Teil dieses Programmes, die Funktionen für den LoRa-Bee.
In drei dieser Variablen müssen hier Daten deiner TTN-Registration eingfügt werden:</p>
<ul>
  <li><code class="highlighter-rouge">static const u1_t PROGMEM APPEUI[8]={DEINE APPEUI IM lsb FORMAT };</code></li>
  <li><code class="highlighter-rouge">static const u1_t PROGMEM DEVEUI[8]={DEINE DEVICE-EUI IM lsb FORMAT};</code></li>
  <li><code class="highlighter-rouge">static const u1_t PROGMEM APPKEY[16]={DEIN APPKEY IM msb FORMAT};</code></li>
</ul>

<p>Diese Variablen sind auch im Code markiert.</p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>/* Ab hier folgen die Funktionen für den LoRaWAN und den TTN Support.
  An den Stellen, an denen Keys vom TTN-Device eingetragen werden müssen, steht dies klar beschrieben*/ 
static const u1_t PROGMEM APPEUI[8]={DEINE APPEUI IM lsb FORMAT};//Hier muss die APPLICATION-EUI im lsb-Format eingetragen werden.

void os_getArtEui (u1_t* buf) { memcpy_P(buf, APPEUI, 8);}

static const u1_t PROGMEM DEVEUI[8]={DEINE DEVICE-EUI IM lsb FORMAT}; //Hier muss die DEVICE-EUI im lsb-Format eingetragen werden.

void os_getDevEui (u1_t* buf) { memcpy_P(buf, DEVEUI, 8);}

static const u1_t PROGMEM APPKEY[16] ={DEIN APPKEY IM msb FORMAT};//Hier muss der APP-KEY im msb-Format eingetragen werden.

void os_getDevKey (u1_t* buf) {  memcpy_P(buf, APPKEY, 16);}

static osjob_t sendjob;
const lmic_pinmap lmic_pins = {
  .nss = PIN_XB1_CS,
  .rxtx = LMIC_UNUSED_PIN,
  .rst = LMIC_UNUSED_PIN,
  .dio = {PIN_XB1_INT, PIN_XB1_INT, LMIC_UNUSED_PIN},
};
bool sending = false;
void onEvent (ev_t ev) {
    sending=true;
  senseBoxIO.statusGreen();

  DEBUG(os_getTime());

  switch(ev) {

    case EV_SCAN_TIMEOUT:

      DEBUG(F("EV_SCAN_TIMEOUT"));

      break;

    case EV_BEACON_FOUND:

      DEBUG(F("EV_BEACON_FOUND"));

      break;

    case EV_BEACON_MISSED:

      DEBUG(F("EV_BEACON_MISSED"));

      break;

    case EV_BEACON_TRACKED:

      DEBUG(F("EV_BEACON_TRACKED"));

      break;

    case EV_JOINING:

      DEBUG(F("EV_JOINING"));
      display.print("joining...");
      display.display();

      break;

    case EV_JOINED:

      DEBUG(F("EV_JOINED"));
      display.print("joined...");
      display.display();
      // Disable link check validation (automatically enabled

      // during join, but not supported by TTN at this time).

      LMIC_setLinkCheckMode(0);

      break;

    case EV_RFU1:

      DEBUG(F("EV_RFU1"));

      break;

    case EV_JOIN_FAILED:

      DEBUG(F("EV_JOIN_FAILED"));

      break;

    case EV_REJOIN_FAILED:

      DEBUG(F("EV_REJOIN_FAILED"));

      break;

    case EV_TXCOMPLETE:

      DEBUG(F("EV_TXCOMPLETE (includes waiting for RX windows)"));

      if (LMIC.txrxFlags &amp; TXRX_ACK)

        DEBUG(F("Received ack"));

      if (LMIC.dataLen) {

        DEBUG(F("Received "));

        DEBUG(LMIC.dataLen);

        DEBUG(F(" bytes of payload"));

      }

      sending = false;
      display.print("done");
      display.display();
      delay(2000);
      break;

    case EV_LOST_TSYNC:

      DEBUG(F("EV_LOST_TSYNC"));

      break;

    case EV_RESET:

      DEBUG(F("EV_RESET"));

      break;

    case EV_RXCOMPLETE:

      // data received in ping slot

      DEBUG(F("EV_RXCOMPLETE"));

      break;

    case EV_LINK_DEAD:

      DEBUG(F("EV_LINK_DEAD"));

      break;

    case EV_LINK_ALIVE:

      DEBUG(F("EV_LINK_ALIVE"));

      break;

    default:

      DEBUG(F("Unknown event"));

      break;

  }

}
void do_send(osjob_t* j){
    sending = true;

  if (LMIC.opmode &amp; OP_TXRXPEND) {

    DEBUG(F("OP_TXRXPEND, not sending"));

  } else {

    LoraMessage message;

    //-----Temperature-----//

    //-----Humidity-----//

      DEBUG(F("Temperature: "));

      temperature = hdc.readTemperature();

      DEBUG(temperature);

      message.addUint16((temperature + 18) * 771);

      delay(2000);



      DEBUG(F("Humidity: "));

      humidity = hdc.readHumidity();

      DEBUG(humidity);

      message.addHumidity(humidity);

      delay(2000);

   //-----PM-----//

      uint8_t attempt = 0;

      while (attempt &lt; 5) {

        bool error = SDS.read(&amp;pm25, &amp;pm10);

        if (!error) {

          DEBUG(F("PM10: "));

          DEBUG(pm10);

          message.addUint16(pm10 * 10);

          DEBUG(F("PM2.5: "));

          DEBUG(pm25);

          message.addUint16(pm25 * 10);

          break;

        }

        attempt++;

      }
    message.addLatLng(gps.location.lat(),gps.location.lng());

    LMIC_setTxData2(1, message.getBytes(), message.getLength(), 0);

    DEBUG(F("Packet queued"));

  }


}
</code></pre></div></div>

<h3 id="setup">Setup</h3>
<p>Im Setup werden erstmal alle benötigten Schnittstellen der MCU eingeschaltet,danach werden das Display und die Sensoren initialisiert.</p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  bool ovrrde = false;
  #ifdef ENABLE_DEBUG //Wenn Debug aktiviert ist, warten, bis eine Serielle Verbindung besteht  
    while(!Serial){}
    Serial.println("Running in Debug Mode:");
  #endif
  Serial.begin(9600);
  senseBoxIO.powerUART(true); //Den Strom einschalten
  senseBoxIO.powerXB1(false); // Reset RFM9X

  delay(250);

  senseBoxIO.powerXB1(true);  // PFM9X An
  senseBoxIO.powerXB2(true);
  senseBoxIO.powerI2C(true);

  Serial1.begin(9600);//Serielle Schnittstellen starten
  Serial2.begin(9600);
  delay(2000);
  display.begin(SSD1306_SWITCHCAPVCC, 0x3D); //Display starten
  display.display();
  delay(100);
  display.clearDisplay();
  display.setCursor(0,0);
  display.setTextSize(1);
  display.setTextColor(WHITE,BLACK);
  hdc.begin(); //HDC starten

</code></pre></div></div>

<p>Jetzt wird nach einem GPS-Signal gesucht.</p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    //Den Nutzer über die Satellitensuche informieren
    Serial.println("Beginning GPS Satellite Search:");
    display.setCursor(0,0);
    display.setTextSize(1);
    display.setTextColor(WHITE,BLACK);
    display.println("Searching Satellites");
    display.display();
    smartDelay(100);
    
    //Warten, bis ein Satellit gefunden wird
    int tries = 0;
    while(gps.satellites.value() == 0){
      smartDelay(100);
      tries ++;
      if (tries &gt; 1200){
          tries = 0;
          ovrrde = true;
          goto ENDSETUP;
      }
      if(digitalRead(0)==LOW){
          while(digitalRead(0)==LOW){}
            goto beginLoop;
        }
    }
    
    if(false){//Dieses Statement wird nur ausgeführt, wenn keine Satelliten gefunden werden
      ENDSETUP:
      display.clearDisplay();
      display.setCursor(0,0);
      display.println("No Satellites were   found...");
      display.println("To continue with the Loop, while still searching in the background, press the Button now");
      display.display();
      while(ovrrde){
      if(digitalRead(0)==LOW){
        while(digitalRead(0)==LOW){}
         ovrrde = false;
         goto beginLoop;
        }
      }
    }
    
    //Wenn Satelliten gefunden sind:
    display.clearDisplay();
    while(!gps.location.isValid()){//Warten, bis das GPS-Signal gefunden wurde
      Serial.print("Satellites found: ");
      Serial.println(gps.satellites.value());
      display.print("Found ");
      display.print(gps.satellites.value());
      display.println(" Satellites.");
      display.display();
      smartDelay(100);
      display.clearDisplay();
      display.setCursor(0,0);
    }
    if(gps.location.isValid()){//Position anzeigen, sobald gefunden.
      display.clearDisplay();
      display.setCursor(0,0);
      display.setTextSize(2);
      display.setTextColor(BLACK,WHITE);
      display.println("GPS found, Location:");
      display.print(gps.location.lat());
      display.print(" ");
      display.println(gps.location.lng());
      display.display();
      Serial.println("GPS Found!");
      Serial.print("Time:");
      Serial.print(gps.time.value());
      smartDelay(5000);    
    }
    //Goto Marker für den Loop
    beginLoop:

</code></pre></div></div>
<p>Zum Schluss wird der LoRa-Bee gestartet:</p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    //LoRa Schnittstelle starten
    os_init();
    LMIC_reset();
    smartDelay(3000);
</code></pre></div></div>
<h3 id="loop">Loop</h3>
<p>Im Loop passieren nur zwei Dinge:</p>
<ol>
  <li>Die GPS-Informationen werden auf dem OLED-Display angezeigt.</li>
  <li>Auf Knopfdruck verbindet sich das Programm per LoRa mit der OpenSenseMap und sendet die Sensorwerte mit Standort</li>
</ol>

<p>Als erstes kommt der Code für das Display, dieser Teil ist von der vorher gennanten “Kosmetik” ziemlich voll:</p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>void loop() {
//Die GPS-Informationen auf dem Display anzeigen
  Serial.print(gps.location.lat());
  Serial.print("N ");
  Serial.print(gps.location.lng());
  Serial.println("E");
  
  display.clearDisplay();
  display.setCursor(0,0);
  display.setTextSize(2);
  display.setTextColor(BLACK,WHITE);
  display.println("Location: ");
  display.print(gps.location.lat());
  display.print(" ");
  display.println(gps.location.lng());
  
  display.setTextSize(1);
  display.setTextColor(WHITE,BLACK);
  display.print("Got ");
  display.print(gps.satellites.value());
  display.println(" Satellites");
  
  display.print("Your Speed: ");
  display.print(int(gps.speed.kmph()));
  display.println("kmph");
  
  display.print("HDOP: ");
  display.println(gps.hdop.hdop());
  
  display.print("Height ");
  display.print(gps.altitude.meters());
  display.println("m");
  
  display.display();
</code></pre></div></div>
<p>Der zweite Teil ist deutlich kürzer, er verlässt sich auf die vorher definierten Funktionen und die LoRa Libarys</p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>if(digitalRead(0)==LOW){//Daten an OSeM senden, wenn der Button gedrückt wird.
    while(digitalRead(0)==LOW){}//Diese while-Schleife stellt sicher, dass der Button losgelassen wird, bevor der Programmablauf fortgesetzt wird
    display.clearDisplay();
    display.setCursor(0,0);
    display.print("Dumping to OSeM via LoRA and TTN...");
    display.display();
    do_send(&amp;sendjob);
  }
  while(sending==true){//Diese Funktion stellt sicher, dass der Sendevorgang abgeschlossen wird, bevor ein neuer gestartet wird.
  os_runloop_once();
  }
</code></pre></div></div>
<p>Die letzte Zeile im Code sorgt dafür, dass die Position immer aktuell ist und verzögert den Loop um 100 Millisekunden</p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>smartDelay(100);
</code></pre></div></div>

<h3 id="der-gesamte-code">Der gesamte Code</h3>
<p>Hier nochmal der gesamte Code:</p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>//Einbinden der benötigten Libaries
#include &lt;senseBoxIO.h&gt;
#include &lt;TinyGPS++.h&gt;
#include &lt;SPI.h&gt;
#include &lt;Wire.h&gt;
#include &lt;Adafruit_GFX.h&gt;
#include &lt;Adafruit_SSD1306.h&gt;
#include &lt;Adafruit_HDC1000.h&gt;
#include &lt;SDS011-select-serial.h&gt;
#include &lt;LoraMessage.h&gt;
#include &lt;lmic.h&gt;
#include &lt;hal/hal.h&gt;
#include &lt;SPI.h&gt;
// #define Statements für Globale Variablen
#define OLED_RESET 4
//#define ENABLE_DEBUG //diese Zeile entkommentieren für Ausgabe im Seriellen Monitor
#ifdef ENABLE_DEBUG
#define DEBUG(str) Serial.println(str)
#else
#define DEBUG(str)
#endif
//Globale Variablen
float pm10,pm25;
float temperature;
float humidity;
//Libary-Objekte
SDS011 SDS(Serial2);        
Adafruit_SSD1306 display(OLED_RESET);
TinyGPSPlus gps;
Adafruit_HDC1000 hdc = Adafruit_HDC1000();

//Diese Funktion stellt sicher, dass das GPS-Modul weiterhin ausgelesen wird.
static void smartDelay(unsigned long ms)
{
  unsigned long start = millis();
  do 
  {
    Wire.requestFrom(0x42,10);
    while (Wire.available())
      gps.encode(Wire.read());
  } while (millis() - start &lt; ms);
}
/* Ab hier folgen die Funktionen für den LoRaWAN und den TTN Support.
 * An den Stellen, an denen Keys vom TTN-Device eingetragen werden müssen, steht dies klar beschrieben */
static const u1_t PROGMEM APPEUI[8]={APPEUI};//Hier muss die APPLICATION-EUI im lsb-Format eingetragen werden.

void os_getArtEui (u1_t* buf) { memcpy_P(buf, APPEUI, 8);}

static const u1_t PROGMEM DEVEUI[8]={DEVEUI }; //Hier muss die DEVICE-EUI im lsb-Format eingetragen werden.

void os_getDevEui (u1_t* buf) { memcpy_P(buf, DEVEUI, 8);}

static const u1_t PROGMEM APPKEY[16] ={APPKEY};//Hier muss der APP-KEY im msb-Format eingetragen werden.

void os_getDevKey (u1_t* buf) {  memcpy_P(buf, APPKEY, 16);}

static osjob_t sendjob;
const lmic_pinmap lmic_pins = {
  .nss = PIN_XB1_CS,
  .rxtx = LMIC_UNUSED_PIN,
  .rst = LMIC_UNUSED_PIN,
  .dio = {PIN_XB1_INT, PIN_XB1_INT, LMIC_UNUSED_PIN},
};
bool sending = false;
void onEvent (ev_t ev) {
    sending=true;
  senseBoxIO.statusGreen();

  DEBUG(os_getTime());

  switch(ev) {

    case EV_SCAN_TIMEOUT:

      DEBUG(F("EV_SCAN_TIMEOUT"));

      break;

    case EV_BEACON_FOUND:

      DEBUG(F("EV_BEACON_FOUND"));

      break;

    case EV_BEACON_MISSED:

      DEBUG(F("EV_BEACON_MISSED"));

      break;

    case EV_BEACON_TRACKED:

      DEBUG(F("EV_BEACON_TRACKED"));

      break;

    case EV_JOINING:

      DEBUG(F("EV_JOINING"));
      display.print("joining...");
      display.display();

      break;

    case EV_JOINED:

      DEBUG(F("EV_JOINED"));
      display.print("joined...");
      display.display();
      // Disable link check validation (automatically enabled

      // during join, but not supported by TTN at this time).

      LMIC_setLinkCheckMode(0);

      break;

    case EV_RFU1:

      DEBUG(F("EV_RFU1"));

      break;

    case EV_JOIN_FAILED:

      DEBUG(F("EV_JOIN_FAILED"));

      break;

    case EV_REJOIN_FAILED:

      DEBUG(F("EV_REJOIN_FAILED"));

      break;

    case EV_TXCOMPLETE:

      DEBUG(F("EV_TXCOMPLETE (includes waiting for RX windows)"));

      if (LMIC.txrxFlags &amp; TXRX_ACK)

        DEBUG(F("Received ack"));

      if (LMIC.dataLen) {

        DEBUG(F("Received "));

        DEBUG(LMIC.dataLen);

        DEBUG(F(" bytes of payload"));

      }

      sending = false;
      display.print("done");
      display.display();
      delay(2000);
      break;

    case EV_LOST_TSYNC:

      DEBUG(F("EV_LOST_TSYNC"));

      break;

    case EV_RESET:

      DEBUG(F("EV_RESET"));

      break;

    case EV_RXCOMPLETE:

      // data received in ping slot

      DEBUG(F("EV_RXCOMPLETE"));

      break;

    case EV_LINK_DEAD:

      DEBUG(F("EV_LINK_DEAD"));

      break;

    case EV_LINK_ALIVE:

      DEBUG(F("EV_LINK_ALIVE"));

      break;

    default:

      DEBUG(F("Unknown event"));

      break;

  }

}

void do_send(osjob_t* j){
    sending = true;

  if (LMIC.opmode &amp; OP_TXRXPEND) {

    DEBUG(F("OP_TXRXPEND, not sending"));

  } else {

    LoraMessage message;

    //-----Temperature-----//

    //-----Humidity-----//

      DEBUG(F("Temperature: "));

      temperature = hdc.readTemperature();

      DEBUG(temperature);

      message.addUint16((temperature + 18) * 771);

      delay(2000);



      DEBUG(F("Humidity: "));

      humidity = hdc.readHumidity();

      DEBUG(humidity);

      message.addHumidity(humidity);

      delay(2000);

   //-----PM-----//

      uint8_t attempt = 0;

      while (attempt &lt; 5) {

        bool error = SDS.read(&amp;pm25, &amp;pm10);

        if (!error) {

          DEBUG(F("PM10: "));

          DEBUG(pm10);

          message.addUint16(pm10 * 10);

          DEBUG(F("PM2.5: "));

          DEBUG(pm25);

          message.addUint16(pm25 * 10);

          break;

        }

        attempt++;

      }
      message.addLatLng(gps.location.lat(),gps.location.lng());

    LMIC_setTxData2(1, message.getBytes(), message.getLength(), 0);

    DEBUG(F("Packet queued"));

  }


}

/*
 * Setup
 */
void setup() {
  #ifdef ENABLE_DEBUG //Wenn Debug aktiviert ist, warten, bis eine Serielle Verbindung besteht  
    while(!Serial){}
    Serial.println("Running in Debug Mode:");
  #endif
  Serial.begin(9600);
  senseBoxIO.powerUART(true); //Den Strom einschalten
  senseBoxIO.powerXB1(false); // Reset RFM9X

  delay(250);

  senseBoxIO.powerXB1(true);  // PFM9X An
  senseBoxIO.powerXB2(true);
  senseBoxIO.powerI2C(true);

  Serial1.begin(9600);//Serielle Schnittstellen starten
  Serial2.begin(9600);
  delay(2000);
  display.begin(SSD1306_SWITCHCAPVCC, 0x3D); //Display starten
  display.display();
  delay(100);
  display.clearDisplay();
  display.setCursor(0,0);
  display.setTextSize(1);
  display.setTextColor(WHITE,BLACK);
  hdc.begin(); //HDC starten

  if(!Serial1.available()){ //Überprüfen, ob das GPS-Modul verbunden ist
      Serial.println("ERR404: DEVICE ON Serial1 NOT FOUND");
      display.println("NO MODULE CONNECTED!");
      display.display();
      while(true){
        delay(100);
      }
  }  
    //Den Nutzer über die Satellitensuche informieren
    Serial.println("Beginning GPS Satellite Search:");
    display.setCursor(0,0);
    display.setTextSize(1);
    display.setTextColor(WHITE,BLACK);
    display.println("Searching Satellites");
    display.display();
    smartDelay(100);
    
    //Warten, bis ein Satellit gefunden wird
    int tries = 0;
    while(gps.satellites.value() == 0){
      smartDelay(100);
      tries ++;
      if (tries &gt; 1200){
          tries = 0;
          goto ENDSETUP;
      }
    }
    
    if(false){//Dieses Statement wird nur ausgeführt, wenn keine Satelliten gefunden werden
      ENDSETUP:
      display.clearDisplay();
      display.setCursor(0,0);
      display.println("No Satellites were   found...");
      display.println("To continue with the Loop, while still searching in the background, press the Button now");
      display.display();
      while(true){
        if(digitalRead(0)==LOW){
          while(digitalRead(0)==LOW){}
            goto beginLoop;
        }
      }
    }
    
    //Wenn Satelliten gefunden sind:
    display.clearDisplay();
    while(!gps.location.isValid()){//Warten, bis das GPS-Signal gefunden wurde
      Serial.print("Satellites found: ");
      Serial.println(gps.satellites.value());
      display.print("Found ");
      display.print(gps.satellites.value());
      display.println(" Satellites.");
      display.display();
      smartDelay(100);
      display.clearDisplay();
      display.setCursor(0,0);
    }
    if(gps.location.isValid()){//Position anzeigen, sobald gefunden.
      display.clearDisplay();
      display.setCursor(0,0);
      display.setTextSize(2);
      display.setTextColor(BLACK,WHITE);
      display.println("GPS found, Location:");
      display.print(gps.location.lat());
      display.print(" ");
      display.println(gps.location.lng());
      display.display();
      Serial.println("GPS Found!");
      Serial.print("Time:");
      Serial.print(gps.time.value());
      smartDelay(5000);    
    }
    //Goto Marker für den Loop
    beginLoop:
    
    //LoRa Schnittstelle starten
    os_init();
    LMIC_reset();
    smartDelay(3000);
}
/*
 * Loop
 */
void loop() {
  //Die GPS-Informationen auf dem Display anzeigen
  Serial.print(gps.location.lat());
  Serial.print("N ");
  Serial.print(gps.location.lng());
  Serial.println("E");
  
  display.clearDisplay();
  display.setCursor(0,0);
  display.setTextSize(2);
  display.setTextColor(BLACK,WHITE);
  display.println("Location: ");
  display.print(gps.location.lat());
  display.print(" ");
  display.println(gps.location.lng());
  
  display.setTextSize(1);
  display.setTextColor(WHITE,BLACK);
  display.print("Got ");
  display.print(gps.satellites.value());
  display.println(" Satellites");
  
  display.print("Your Speed: ");
  display.print(int(gps.speed.kmph()));
  display.println("kmph");
  
  display.print("HDOP: ");
  display.println(gps.hdop.hdop());
  
  display.print("Height ");
  display.print(gps.altitude.meters());
  display.println("m");
  
  display.display();

  if(digitalRead(0)==LOW){//Daten an OSeM senden, wenn der Button gedrückt wird.
    while(digitalRead(0)==LOW){}//Diese while-Schleife stellt sicher, dass der Button losgelassen wird, bevor der Programmablauf fortgesetzt wird
    display.clearDisplay();
    display.setCursor(0,0);
    display.print("Dumping to OSeM via LoRA and TTN...");
    display.display();
    do_send(&amp;sendjob);
  }
  while(sending==true){//Diese Funktion stellt sicher, dass der Sendevorgang abgeschlossen wird, bevor ein neuer gestartet wird.
  os_runloop_once();
  }
  smartDelay(100);//loop alle 100 Millisekunden 
}
</code></pre></div></div>

	</article>
</div>
  </div>
  <footer class="container py-5">
    <div class="row">
        <div class="col-12 col-md">
            <?xml version="1.0" encoding="UTF-8" standalone="no"?>
            <!-- Created with Inkscape (http://www.inkscape.org/) -->

            <svg xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:cc="http://creativecommons.org/ns#"
                xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns:svg="http://www.w3.org/2000/svg"
                xmlns="http://www.w3.org/2000/svg" xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd"
                xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape" id="svg3336" version="1.1"
                inkscape:version="0.91 r13725" xml:space="preserve" width="100" height="100"
                viewBox="0 0 210.3039 210.29684" sodipodi:docname="sensebox_sticker_randlos.svg">
                <metadata id="metadata3342">
                    <rdf:RDF>
                        <cc:Work rdf:about="">
                            <dc:format>image/svg+xml</dc:format>
                            <dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage" />
                            <dc:title></dc:title>
                        </cc:Work>
                    </rdf:RDF>
                </metadata>
                <defs id="defs3340">
                    <clipPath clipPathUnits="userSpaceOnUse" id="clipPath3372">
                        <path d="M 1776.56,314.355 1577.99,115.773 1379.41,314.355 1577.99,512.93 1776.56,314.355"
                            id="path3374" inkscape:connector-curvature="0" />
                    </clipPath>
                </defs>
                <sodipodi:namedview pagecolor="#ffffff" bordercolor="#666666" borderopacity="1" objecttolerance="10"
                    gridtolerance="10" guidetolerance="10" inkscape:pageopacity="0" inkscape:pageshadow="2"
                    inkscape:window-width="2560" inkscape:window-height="1385" id="namedview3338" showgrid="false"
                    units="mm" fit-margin-top="0" fit-margin-left="0" fit-margin-bottom="0" fit-margin-right="0"
                    inkscape:zoom="2.8284271" inkscape:cx="96.486743" inkscape:cy="50.741222" inkscape:window-x="0"
                    inkscape:window-y="27" inkscape:window-maximized="1" inkscape:current-layer="g3344" />
                <g id="g3344" inkscape:groupmode="layer" inkscape:label="ink_ext_XXXXXX"
                    transform="matrix(1.25,0,0,-1.25,-144.87458,197.27671)">
                    <g id="g4162">
                        <path
                            d="m 236.25729,25.809652 c -9.41744,8.915872 -22.084,14.430114 -36.05095,14.430465 -14.08981,3.52e-4 -26.84929,-5.570861 -36.27475,-14.569288 l 36.08553,-36.086939 36.2403,36.225907"
                            style="fill:#4ebe4b;fill-opacity:1;fill-rule:nonzero;stroke:none" id="path3354"
                            inkscape:connector-curvature="0" />
                        <path
                            d="m 200.30182,117.74887 c -11.35741,2.9e-4 -21.85074,3.73524 -30.34036,10.00385 l 30.06823,30.06865 30.3324,-30.33324 c -8.44695,-6.11398 -18.82147,-9.73954 -30.06027,-9.73926"
                            style="fill:#fff200;fill-opacity:1;fill-rule:nonzero;stroke:none" id="path3356"
                            inkscape:connector-curvature="0" />
                        <path
                            d="m 196.62929,105.2736 c 0.52962,-3.27507 -1.68587,-6.326391 -4.93931,-6.839326 -3.25343,-0.519279 -6.31206,1.699746 -6.82474,4.933296 -0.52961,3.26321 1.68588,6.32428 4.93932,6.83551 3.24919,0.53284 6.31207,-1.68788 6.82473,-4.92948"
                            style="fill:#45beed;fill-opacity:1;fill-rule:nonzero;stroke:none" id="path3358"
                            inkscape:connector-curvature="0" />
                        <path
                            d="m 196.62993,80.152143 c 0.53808,-3.256854 -1.68588,-6.317921 -4.93931,-6.825761 -3.25344,-0.539623 -6.3036,1.684495 -6.82474,4.926516 -0.52962,3.264901 1.68587,6.32597 4.93083,6.838898 3.25768,0.531147 6.32055,-1.686193 6.83322,-4.939653"
                            style="fill:#45beed;fill-opacity:1;fill-rule:nonzero;stroke:none" id="path3360"
                            inkscape:connector-curvature="0" />
                        <path
                            d="m 216.02407,58.889433 c 0.51267,-3.247108 -1.68587,-6.308171 -4.95625,-6.834233 -3.25768,-0.50785 -6.30361,1.696353 -6.82475,4.944733 -0.52962,3.263205 1.68587,6.312834 4.93931,6.833817 3.25344,0.532839 6.3036,-1.689583 6.84169,-4.944317"
                            style="fill:#45beed;fill-opacity:1;fill-rule:nonzero;stroke:none" id="path3362"
                            inkscape:connector-curvature="0" />
                        <path
                            d="m 221.97942,92.07404 c 0.52114,-3.236517 -1.68588,-6.29801 -4.94779,-6.824072 -3.24919,-0.53114 -6.3036,1.687887 -6.83321,4.94474 -0.52962,3.251766 1.69859,6.312837 4.93931,6.834234 3.2619,0.524367 6.31208,-1.696353 6.84169,-4.954902"
                            style="fill:#45beed;fill-opacity:1;fill-rule:nonzero;stroke:none" id="path3364"
                            inkscape:connector-curvature="0" />
                        <path
                            d="m 254.26095,43.693851 -10.90039,10.891908 11.28511,11.285536 -22.57927,5.73e-4 -7.81588,7.824367 7.59542,7.60009 23.00713,-5.81e-4 -11.50172,11.517849 10.91234,10.892857 29.8791,-29.879533 -29.88183,-30.133049"
                            style="fill:#45beed;fill-opacity:1;fill-rule:nonzero;stroke:none" id="path3366"
                            inkscape:connector-curvature="0" />
                        <g transform="matrix(0.42362617,-1.0656099e-5,-1.0656099e-5,0.42362617,-468.45117,-59.452381)"
                            id="g3368">
                            <g id="g3370" clip-path="url(#clipPath3372)">
                                <path
                                    d="m 1413.79,344.719 -8.58,-8.582 c 6.05,-6.059 9.02,-13.887 9.04,-21.824 -0.02,-7.938 -2.99,-15.758 -9.02,-21.797 -6.06,-6.043 -13.89,-9.02 -21.82,-9.036 -7.95,0.016 -15.78,2.993 -21.84,9.047 -6.04,6.047 -9.02,13.871 -9.03,21.805 0.01,7.934 2.99,15.754 9.03,21.805 l 0.31,0.304 -0.32,-0.308 c 6.07,6.047 13.9,9.027 21.84,9.039 7.94,-0.016 15.76,-2.984 21.8,-9.031 l 0.01,-0.004 8.58,8.582 8.58,8.574 c -10.72,10.75 -24.9,16.164 -38.97,16.148 -14.07,0.016 -28.25,-5.406 -38.99,-16.136 l 0.32,0.316 -0.32,-0.324 c -10.74,-10.727 -16.15,-24.902 -16.14,-38.965 -0.01,-14.062 5.4,-28.238 16.14,-38.969 10.74,-10.746 24.93,-16.168 39,-16.152 14.07,-0.012 28.24,5.406 38.98,16.141 10.73,10.722 16.14,24.894 16.13,38.961 0.01,14.062 -5.4,28.246 -16.15,38.984 l 0.32,-0.317 -0.32,0.313 -8.58,-8.574"
                                    style="fill:#4abeea;fill-opacity:1;fill-rule:nonzero;stroke:none" id="path3376"
                                    inkscape:connector-curvature="0" />
                                <path
                                    d="m 1444.18,375.129 -8.58,-8.582 c 14.45,-14.457 21.62,-33.277 21.63,-52.215 -0.01,-18.937 -7.19,-37.762 -21.63,-52.215 -14.44,-14.429 -33.28,-21.609 -52.22,-21.625 -18.93,0.016 -37.75,7.18 -52.2,21.625 -14.45,14.453 -21.61,33.266 -21.63,52.188 0.02,18.937 7.2,37.761 21.65,52.215 14.46,14.453 33.28,21.632 52.22,21.648 18.92,-0.016 37.72,-7.18 52.18,-21.621 l 8.58,8.582 8.58,8.582 c -19.13,19.129 -44.29,28.738 -69.34,28.727 -25.08,0.011 -50.26,-9.618 -69.38,-28.754 -19.14,-19.121 -28.77,-44.305 -28.76,-69.379 -0.01,-25.055 9.6,-50.223 28.74,-69.352 19.13,-19.137 44.3,-28.742 69.36,-28.73 25.08,-0.012 50.26,9.605 69.38,28.73 19.13,19.129 28.76,44.309 28.74,69.379 0.02,25.066 -9.6,50.246 -28.74,69.379 l -8.58,-8.582"
                                    style="fill:#4abeea;fill-opacity:1;fill-rule:nonzero;stroke:none" id="path3378"
                                    inkscape:connector-curvature="0" />
                                <path
                                    d="m 1474.57,405.523 -8.58,-8.582 c 22.85,-22.851 34.22,-52.664 34.23,-82.589 -0.01,-29.942 -11.4,-59.778 -34.23,-82.625 -22.84,-22.832 -52.67,-34.207 -82.61,-34.219 -29.92,0.012 -59.74,11.375 -82.59,34.219 -22.84,22.839 -34.2,52.644 -34.22,82.566 0.02,29.945 11.4,59.781 34.24,82.637 22.84,22.832 52.67,34.211 82.61,34.222 29.92,-0.011 59.73,-11.371 82.57,-34.211 l 0,0 8.58,8.582 8.58,8.579 c -27.51,27.535 -63.68,41.336 -99.73,41.324 -36.07,0.012 -72.25,-13.813 -99.77,-41.336 -27.54,-27.527 -41.36,-63.719 -41.35,-99.797 -0.01,-36.051 13.79,-72.219 41.33,-99.73 27.52,-27.536 63.7,-41.34 99.75,-41.329 36.07,-0.011 72.25,13.809 99.77,41.329 27.53,27.527 41.35,63.71 41.34,99.789 0.02,36.054 -13.79,72.23 -41.34,99.753 l 0.45,-0.449 -0.45,0.446 -8.58,-8.579"
                                    style="fill:#4abeea;fill-opacity:1;fill-rule:nonzero;stroke:none" id="path3380"
                                    inkscape:connector-curvature="0" />
                                <path
                                    d="m 1395.06,317.23 c 1.37,-8.496 -4.38,-16.41 -12.83,-17.746 -8.44,-1.359 -16.37,4.414 -17.72,12.797 -1.37,8.465 4.4,16.41 12.83,17.735 8.44,1.375 16.37,-4.375 17.72,-12.786"
                                    style="fill:#45beed;fill-opacity:1;fill-rule:nonzero;stroke:none" id="path3382"
                                    inkscape:connector-curvature="0" />
                            </g>
                        </g>
                    </g>
                </g>
            </svg>
            <small class="d-block mb-3 text-muted">&copy; 2017-2018</small>
        </div>
        <div class="col-6 col-md">
            <h5>Hintergrund</h5>
            <ul class="list-unstyled text-small">
                <li><a class="text-muted" href="#">Über Uns</a></li>
                <li><a class="text-muted" href="#">Philosphie</a></li>
                <li><a class="text-muted" href="#">Team feature</a></li>
                <li><a class="text-muted" href="#">Stuff for developers</a></li>
                <li><a class="text-muted" href="#">Another one</a></li>
                <li><a class="text-muted" href="#">Last time</a></li>
            </ul>
        </div>
        <div class="col-6 col-md">
            <h5>Resources</h5>
            <ul class="list-unstyled text-small">
                <li><a class="text-muted" href="#">Resource</a></li>
                <li><a class="text-muted" href="#">Resource name</a></li>
                <li><a class="text-muted" href="#">Another resource</a></li>
                <li><a class="text-muted" href="#">Final resource</a></li>
            </ul>
        </div>
        <div class="col-6 col-md">
            <h5>Resources</h5>
            <ul class="list-unstyled text-small">
                <li><a class="text-muted" href="#">Business</a></li>
                <li><a class="text-muted" href="#">Education</a></li>
                <li><a class="text-muted" href="#">Government</a></li>
                <li><a class="text-muted" href="#">Gaming</a></li>
            </ul>
        </div>
        <div class="col-6 col-md">
            <h5>About</h5>
            <ul class="list-unstyled text-small">
                <li><a class="text-muted" href="#">Team</a></li>
                <li><a class="text-muted" href="#">Locations</a></li>
                <li><a class="text-muted" href="#">Privacy</a></li>
                <li><a class="text-muted" href="#">Terms</a></li>
            </ul>
        </div>
    </div>
</footer>
  <script src="/js/jquery-3.5.1.min.js"></script>
  <script src="/js/bootstrap.min.js"></script>
</body>

</html>